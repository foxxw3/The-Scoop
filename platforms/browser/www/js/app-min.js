var $$=Dom7,app=new Framework7({root:"#app",id:"io.framework7.testapp",name:"Framework7",theme:"auto",data:function(){return{user:{firstName:"John",lastName:"Doe"},scoops:[{id:"1",title:"Social Life",flavor:"Chocolate"},{id:"2",title:"Family Time",flavor:"Vanilla"},{id:"3",title:"Education",flavor:"Strawberry"}],checkins:[{id:"1",title:"Morning",time:"12:00PM",storedScoops:[]},{id:"2",title:"Afternoon",time:"12:00PM",storedScoops:[]},{id:"3",title:"Night",time:"12:00PM",storedScoops:[]}]}},methods:{helloWorld:function(){app.dialog.alert("Hello World!")}},routes:routes}),homeView=app.views.create("#view-home",{url:"/"}),todayView=app.views.create("#view-today",{url:"/today/"}),scoopsView=app.views.create("#view-scoops",{url:"/scoops/"}),settingsView=app.views.create("#view-settings",{url:"/settings/"}),loginView=app.views.create("#view-login",{url:"/login/"}),signUpView=app.views.create("#view-sign-up",{url:"/sign-up/"});function getMethods(e){var o=[];for(var t in e)"function"==typeof e[t]&&o.push(t);return console.log(o),o}$$("#my-login-screen .login-button").on("click",function(){var e=$$('#my-login-screen [name="username"]').val(),o=$$('#my-login-screen [name="password"]').val();app.loginScreen.close("#my-login-screen"),app.dialog.alert("Username: "+e+"<br>Password: "+o)}),console.log(app),getMethods(app),$$(document).on("page:init",function(e){console.log("ran after in of home"),localStorage.getItem("username")||(console.log("running localStorage if "+localStorage.getItem("username")),console.log(app.router),app.views.main.router.navigate("/login/")),"temp"==localStorage.getItem("username")&&(console.log("running localStorage if "+localStorage.getItem("username")),console.log(app),app.views.main.router.navigate("/sign-up/"))}),$$(document).on("page:afterin",'.page[data-name="settings"]',function(e){console.log("ran settings"),$(document).ready(function(){$("#createUser").click(function(){var e=$("#username").val(),o=$("#password").val(),t=$("#fname").val(),n=$("#lname").val(),a="username="+e+"&password="+o+"&fname="+t+"&lname="+n+"&insert=";return $.trim(e).length>0&$.trim(o).length>0&$.trim(t).length>0&$.trim(n).length>0&&$.ajax({type:"POST",url:"http://iontheory.net/scoop/users/insert.php",data:a,crossDomain:!0,cache:!1,beforeSend:function(){$("#insert").val("Connecting...")},success:function(e){"success"==e?(alert("inserted"),$("#insert").val("submit")):"error"==e&&alert("error")}}),!1});var e="http://iontheory.net/scoop/users/getUser.php?username="+localStorage.getItem("username"),o="",t="",n="",a="";console.log("settings url: "+e),$("#username").val(localStorage.getItem("username")),$.getJSON(e,function(e){console.log(e),$.each(e,function(e,r){o=r.username,t=r.password,n=r.fname,a=r.lname,console.log("settings "+o),console.log("settings "+t),console.log("settings "+n),console.log("settings "+a)}),$("#username").val(o),$("#password").val(t),$("#fname").val(n),$("#lname").val(a)}),$("#updateUser").click(function(){var e=$("#username").val(),o=$("#password").val(),t=$("#fname").val(),n=$("#lname").val(),a="id="+id+"&username="+e+"&password="+o+"&fname="+t+"&lname="+n+"&update=";$.ajax({type:"POST",url:"http://iontheory.net/scoop/users/update.php",data:a,crossDomain:!0,cache:!1,beforeSend:function(){$("#update").val("Connecting...")},success:function(e){"success"==e?(alert("Updated"),$("#update").val("Update")):"error"==e&&alert("error")}})}),$("#logoutUser").click(function(){localStorage.setItem("username",""),console.log("Ran logout"),$(".toolbar").hide()}),$("#deleteUser").click(function(){var e,o="username="+$("#username").val()+"&delete=";$.ajax({type:"GET",url:"http://iontheory.net/scoop/users/delete.php",data:o,crossDomain:!0,cache:!1,beforeSend:function(){$("#delete").val("Connecting...")},success:function(e){"success"==e?(alert("Deleted"),$("#deleteUser").val("Delete")):"error"==e&&alert("error")}})})})}),$$(document).on("page:afterin",'.page[data-name="scoops"]',function(e){$(document).ready(function(){console.log("ran read.js");var o="http://iontheory.net/scoop/categories/json.php?user="+localStorage.getItem("username"),t='<div class="scoop add-new"><a href="/add-scoop/"><img src="./assets/img/add-icon.svg"><p>Add New</p><img src="./assets/img/arrow-right.svg"></a></div>';console.log("scoops get url: "+o),console.log(t),$.getJSON(o,function(e){$("#listcats").append(t),console.log(e),$.each(e,function(e,o){var t=o.ID,n=o.user,a=o.category,r=o.color;Parsedcolor=r.replace("#","%23"),$("#listcats").append("<div class='scoop "+r+" ' style='background-color:"+r+";''><a href='/scoop/"+t+"/?id="+t+"&user="+n+"&category="+a+"&color="+Parsedcolor+"'><img src='./assets/img/social-category-icon.svg'><p>"+a+"</p><img src='./assets/img/arrow-right.svg'></a></div>")})}),console.log(e.detail.route);var n=e.detail.route.query.id,a=e.detail.route.query.user,r=e.detail.route.query.category,s=e.detail.route.query.color,c=localStorage.getItem("someSetting");console.log("some setting = "+c),console.log(n),console.log(a),console.log(r),console.log(s),$("#id").val(n),$("#username").val(a),$("#category").val(r),$("#color").val(s),$("#update").click(function(){var e,o,t,n,a="id="+$("#id").val()+"&user="+$("#username").val()+"&category="+$("#category").val()+"&color="+$("#color").val()+"&update=";$.ajax({type:"POST",url:"http://iontheory.net/scoop/categories/update.php",data:a,crossDomain:!0,cache:!1,beforeSend:function(){$("#update").val("Connecting...")},success:function(e){"success"==e?(alert("Updated"),$("#update").val("Update")):"error"==e&&alert("error")}})}),$("#delete").click(function(){var e,o="id="+$("#id").val()+"&delete=";$.ajax({type:"GET",url:"http://iontheory.net/scoop/categories/delete.php",data:o,crossDomain:!0,cache:!1,beforeSend:function(){$("#delete").val("Connecting...")},success:function(e){"success"==e?(alert("Deleted"),$("#delete").val("Delete")):"error"==e&&alert("error")}})}),$("#insert").click(function(){var e=$("#username").val(),o=$("#category").val(),t=$("#color").val(),n="user="+e+"&category="+o+"&color="+t+"&insert=";return console.log("running insert"),console.log(e),console.log(o),console.log(t),console.log(n),$.trim(e).length>0&$.trim(o).length>0&$.trim(t).length>0&&$.ajax({type:"POST",url:"http://iontheory.net/scoop/categories/insert.php",data:n,crossDomain:!0,cache:!1,beforeSend:function(){$("#insert").val("Connecting...")},success:function(e){"success"==e?(alert("inserted"),$("#insert").val("submit")):"error"==e&&alert("error")}}),!1})})}),$$(document).on("page:afterin",'.page[data-name="checkingroup"]',function(e){$(document).ready(function(){console.log("ran read.js"),console.log(e.detail.route.query.time),$("#checkingroupTitle").text(e.detail.route.query.time);var o="http://iontheory.net/scoop/categories/json.php?user="+localStorage.getItem("username");console.log("scoops get url: "+o),$.getJSON(o,function(e){console.log(e),$.each(e,function(e,o){var t=o.ID,n=localStorage.getItem("username"),a=o.category,r=o.color;Parsedcolor=r.replace("#","%23"),$("#listcheckins").append("<div class='scoop' style='background-color:"+r+";''><a href='/checkin-scoop/?user="+localStorage.getItem("username")+"&category="+a+"'><img src='./assets/img/social-category-icon.svg'><p>"+a+"</p><img src='./assets/img/arrow-right.svg'></a></div>")})})})}),$$(document).on("page:afterin",'.page[data-name="today"]',function(e){$(document).ready(function(){console.log("running today"),console.log();var o=e.detail.route.params.title,t="http://iontheory.net/scoop/categories/json.php";$.getJSON(t,function(e){console.log(e),$.each(e,function(e,t){var n=t.ID,a=t.user,r=t.category,s,c,l,i="<div class='individual-scoop'><a href='/checkin-scoop/"+n+"/"+("?id="+n+"&user="+a+"&category="+r+"&color="+t.color.replace("#","%23")+"&checkinTitle="+o)+'\'><img src="./assets/img/social-category-icon.svg"><p>'+r+"</p></a></div>";console.log(i),$("#listcheckins").append(i)})}),$("#checkInContinue").click(function(){console.log("ran checkin continue");var o=localStorage.getItem("username"),t=$("#category").val(),n=$("#hours").val(),a=$("#effect").val(),r=e.detail.route.query.checkinTitle,s=n*a,c="user="+o+"&category="+t+"&points="+s+"&time="+r+"&insert=";return console.log("running insert"),console.log(o),console.log(t),console.log(s),console.log(r),console.log(c),$.trim(o).length>0&$.trim(t).length>0&$.trim(s).length>0&$.trim(r).length>0&&$.ajax({type:"POST",url:"http://iontheory.net/scoop/entries/insert.php",data:c,crossDomain:!0,cache:!1,beforeSend:function(){$("#insert").val("Connecting...")},success:function(e){"success"==e?(alert("inserted"),$("#insert").val("submit")):"error"==e&&alert("error")}}),!1})})}),$$(document).on("page:afterin",'.page[data-name="sign-up"]',function(e){$(document).ready(function(){console.log("running sign up"),$("#signupContinue").click(function(){var e=$("#signupusername").val(),o=$("#signuppassword").val(),t=$("#fname").val(),n=$("#lname").val(),a="username="+e+"&password="+o+"&fname="+t+"&lname="+n+"&insert=";return console.log("running insert"),console.log(e),console.log(o),console.log(t),console.log(n),console.log(a),$.trim(e).length>0&$.trim(o).length>0&$.trim(t).length>0&$.trim(n).length>0&&$.ajax({type:"POST",url:"http://iontheory.net/scoop/users/insert.php",data:a,crossDomain:!0,cache:!1,success:function(o){"success"==o?(alert("account created"),localStorage.setItem("username",e),app.views.main.router.navigate("/"),$(".toolbar").show()):"error"==o&&alert("error")}}),!1})})}),$$(document).on("page:afterin",'.page[data-name="login"]',function(e){$(document).ready(function(){console.log("running login"),$("#loginButton").click(function(){var e=$("#loginusername").val(),o=$("#loginpassword").val(),t="username="+e+"&password="+o;console.log("running authentication"),console.log(e),console.log(o),console.log(t);var n="http://iontheory.net/scoop/users/auth.php?username="+e+"&password="+o;return $.getJSON(n,function(o){if(console.log(o),console.log(o.length),0!=o.length){alert("Authenticated"),localStorage.setItem("username",e),app.views.main.router.navigate("/"),$(".toolbar").show(),$(".cone-slider").slick({arrows:!0,infinite:!1,rtl:!0});for(var t=["#FEFEFE","#333333","#FEFEFE","#333333"],n=t.length,a=0,r=0,s=0;s<n;s++){var a=40*s-40;r=499-s;var c="<div class='scoop-topping' style='background-color:"+t[s]+"; bottom: "+a+"px;'></div>";$("#scoops-stack").append(c)}}else alert("error")}),!1})})}),$$(document).on("page:afterin",'.page[data-name="home"]',function(e){$(document).ready(function(){$(".cone-slider").slick({arrows:!0,infinite:!1,rtl:!0})});for(var o=["#FEFEFE","#333333","#FEFEFE","#333333"],t=o.length,n=0,a=0,r=0;r<t;r++){var n=40*r-40;a=0-r;var s="<div class='scoop-topping' style='background-color:"+o[r]+"; bottom: "+n+"px; z-index: "+a+"'></div>";$("#scoops-stack").append(s)}}),$$(document).on("page:afterout",'.page[data-name="checkingroup"]',function(e){$(document).ready(function(){$("#listcheckins").empty()})}),$$(document).on("page:afterout",'.page[data-name="scoops"]',function(e){$(document).ready(function(){$("#listcats").empty()})}),$(document).ready(function(){$(".cone-slider").slick({arrows:!0,infinite:!1,rtl:!0}),localStorage.getItem("username")?$(".toolbar").show():$(".toolbar").hide();for(var e=["#FEFEFE","#333333","#FEFEFE","#333333"],o=e.length,t=0,n=0,a=0;a<o;a++){var t=40*a-40;n=0-a,console.log("building scoop"),console.log(n);var r="<div class='scoop-topping' style='background-color:"+e[a]+"; bottom: "+t+"px; z-index: "+n+"'></div>";$("#scoops-stack").append(r)}});